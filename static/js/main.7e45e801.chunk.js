(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{24:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(12),o=n(9),a=n(3),s=n(0),i=Object(r.createContext)({isLoadingAll:!1,setIsLoadingAll:function(){},isLoading:!1,setIsLoading:function(){}}),u=function(e){var t=e.children,n=Object(r.useState)(!1),c=Object(a.a)(n,2),u=c[0],l=c[1],d=Object(r.useState)(!1),p=Object(a.a)(d,2),f={isLoadingAll:u,setIsLoadingAll:l},j={isLoading:p[0],setIsLoading:p[1]};return Object(s.jsx)(i.Provider,{value:Object(o.a)(Object(o.a)({},f),j),children:t})},l=(n(22),n(23),n(24),n(2)),d=n(10),p=n(5),f=n(4),j=n.n(f),b=function(e){return e.NONE="",e.ALL="all",e.ACTIVE="active",e.COMPLETED="completed",e}({}),h=function(e){var t=e.todos,n=e.filterType,r=e.setFilterType,c=e.handleClearCompleted,o=t.filter((function(e){return!e.completed})).length;return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("footer",{className:"todoapp__footer",children:[Object(s.jsx)("span",{className:"todo-count",children:"".concat(o," item").concat(1!==o?"s":""," left")}),Object(s.jsxs)("nav",{className:"filter",children:[Object(s.jsx)("a",{href:"#/",className:j()("filter__link",{selected:n===b.ALL}),onClick:function(){return r(b.ALL)},children:"All"}),Object(s.jsx)("a",{href:"#/active",className:j()("filter__link",{selected:n===b.ACTIVE}),onClick:function(){return r(b.ACTIVE)},children:"Active"}),Object(s.jsx)("a",{href:"#/completed",className:j()("filter__link",{selected:n===b.COMPLETED}),onClick:function(){return r(b.COMPLETED)},children:"Completed"})]}),Object(s.jsx)("button",{type:"button",className:"todoapp__clear-completed",onClick:c,style:{visibility:t.some((function(e){return e.completed}))?"visible":"hidden"},children:"Clear completed"})]})})},O=function(e){return e.NONE="",e.UPLOAD="Unable to upload todos",e.ADD="Unable to add a todo",e.DELETE="Unable to delete a todo",e.UPDATE="Unable to update a todo",e.EMPTY="Title can't be empty",e.NOUSER="Please, check your User Id",e}({}),m=function(e){var t=e.todos,n=e.hasSomeTodos,r=e.onChangeIsError,c=e.onSubmitAddTodo,o=e.titleTodo,a=e.onChangeTitle,i=e.onToggleAll;return Object(s.jsxs)("header",{className:"todoapp__header",children:[n&&Object(s.jsx)("button",{type:"button",className:j()("todoapp__toggle-all",{active:t.every((function(e){return!e.completed}))}),onClick:i}),Object(s.jsx)("form",{onSubmit:function(e){e.preventDefault();try{c(o.trimStart())}catch(t){r(O.ADD)}},children:Object(s.jsx)("input",{type:"text",className:"todoapp__new-todo",placeholder:"What needs to be done?",value:o,onChange:function(e){return a(e.target.value)}})})]})};function v(e){var t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r={method:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET"};return n&&(r.body=JSON.stringify(n),r.headers={"Content-Type":"application/json; charset=UTF-8"}),(t=300,new Promise((function(e){setTimeout(e,t)}))).then((function(){return fetch("https://mate.academy/students-api"+e,r)})).then((function(e){if(!e.ok)throw new Error;return e.json()}))}var x=function(e){return v(e)},E=function(e,t){return v(e,"POST",t)},T=function(e,t){return v(e,"PATCH",t)},g=function(e){return v(e,"DELETE")},C=function(e,t){return g("/todos/".concat(t,"?userId=").concat(e))},N=function(e,t){return T("/todos/".concat(e),t)},k=function(e,t){return e.map((function(e){return t.find((function(t){return t.id===e.id}))||e}))},y=function(e,t){return T("/todos/".concat(e),{title:t})},_=function(e){var t=e.todo,n=e.onChangeIsError,c=e.onDeleteTodo,o=e.onChangeTodo,u=t.title,d=t.id,f=Object(r.useState)(!1),b=Object(a.a)(f,2),h=b[0],m=b[1],v=Object(r.useState)(u),x=Object(a.a)(v,2),E=x[0],T=x[1],g=Object(r.useState)(0===d),C=Object(a.a)(g,2),N=C[0],k=C[1],_=Object(r.useContext)(i).isLoadingAll,L=function(){var e=Object(p.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k(!0),e.next=4,c(t.id);case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),n(O.DELETE),k(!1);case 10:return e.prev=10,k(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,6,10,13]])})));return function(){return e.apply(this,arguments)}}(),A=function(){m(!1),T(u)},D=function(){var e=Object(p.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E!==u){e.next=4;break}return e.next=3,A();case 3:return e.abrupt("return");case 4:if(E.trim()){e.next=8;break}return e.next=7,c(t.id);case 7:return e.abrupt("return");case 8:return e.prev=8,k(!0),e.next=12,y(t.id,E);case 12:m(!1),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(8),m(!0),n(O.UPDATE),k(!1);case 20:return e.prev=20,k(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[8,15,20,23]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(p.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(!1),E!==u&&D();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(p.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k(!0),e.next=4,o(t.id,{completed:!t.completed});case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),n(O.UPDATE),k(!1);case 10:return e.prev=10,k(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,6,10,13]])})));return function(){return e.apply(this,arguments)}}();return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("section",{className:"todoapp__main",children:Object(s.jsxs)("div",{className:j()("todo",{completed:t.completed}),children:[Object(s.jsx)("label",{className:"todo__status-label",children:Object(s.jsx)("input",{type:"checkbox",className:"todo__status",onChange:I})}),h?Object(s.jsx)("form",{onSubmit:function(e){e.preventDefault(),D()},children:Object(s.jsx)("input",{type:"text",className:"todo__title todo__input",value:E,onChange:function(e){T(e.target.value)},onBlur:w,onKeyUp:function(e){"Escape"===e.key&&A()},autoFocus:!0})}):Object(s.jsx)("span",{className:"todo__title",onDoubleClick:function(){m(!0)},children:E}),Object(s.jsx)("button",{type:"button",className:"todo__remove",onClick:L,children:"\xd7"}),Object(s.jsxs)("div",{className:j()("modal overlay",{"is-active":N||_}),children:[Object(s.jsx)("div",{className:"modal-background has-background-white-ter"}),Object(s.jsx)("div",{className:"loader"})]})]})})})},L=function(e){var t=e.todos,n=e.onChangeIsError,r=e.tempTodo,c=e.onDelete,o=e.onChangeTodo;return Object(s.jsxs)("div",{children:[t.map((function(e){return Object(s.jsx)(_,{todo:e,onChangeIsError:n,onDeleteTodo:function(){return c(e.id)},onChangeTodo:o},e.id)})),r&&Object(s.jsx)(_,{todo:r,onChangeIsError:n,onDeleteTodo:function(){return c(r.id)},onChangeTodo:o},r.id)]})},A=function(){return Object(s.jsx)("div",{className:"spinner-container",children:Object(s.jsx)("div",{className:"loading-spinner"})})},D=10209,w=function(e,t){switch(t){case b.ALL:return e;case b.ACTIVE:return e.filter((function(e){return!e.completed}));case b.COMPLETED:return e.filter((function(e){return e.completed}));default:return[]}},I=function(){var e=Object(r.useState)([]),t=Object(a.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(O.NONE),u=Object(a.a)(o,2),f=u[0],v=u[1],T=Object(r.useState)(b.ALL),g=Object(a.a)(T,2),y=g[0],_=g[1],I=Object(r.useState)(""),P=Object(a.a)(I,2),S=P[0],U=P[1],M=Object(r.useState)(null),F=Object(a.a)(M,2),V=F[0],J=F[1],B=Object(r.useState)(!1),R=Object(a.a)(B,2),Y=R[0],G=R[1],H=Object(r.useContext)(i).setIsLoadingAll,K=Object(r.useContext)(i).setIsLoading;Object(r.useEffect)((function(){var e;G(!0),(e=D,x("/todos?userId=".concat(e))).then((function(e){c(e),G(!1)})).catch((function(){v(O.UPLOAD),G(!1)}))}),[]);var W=w(n,y),q=w(n,b.COMPLETED),z=n.length===q.length,Q=function(e){v(e),setTimeout((function(){v(O.NONE)}),3e3)},X=function(){var e=Object(p.a)(Object(l.a)().mark((function e(t){var n,r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return v(O.EMPTY),setTimeout((function(){v(O.NONE)}),3e3),e.abrupt("return");case 4:return J(n={id:0,userId:D,title:S,completed:!1}),e.next=8,o=n,E("/todos?userId=".concat(D),o);case 8:r=e.sent,c((function(e){return[].concat(Object(d.a)(e),[r])})),J(null),U("");case 12:case"end":return e.stop()}var o}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(p.a)(Object(l.a)().mark((function e(t){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K(!0),e.next=3,C(D,t);case 3:try{c(n.filter((function(e){return e.id!==t})))}catch(r){v(O.DELETE),K(!1)}finally{K(!1)}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(p.a)(Object(l.a)().mark((function e(){var t;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.filter((function(e){return e.completed})).map((function(e){return e.id})),e.prev=1,H(!0),e.next=5,Promise.all(t.map((function(e){return C(D,e)})));case 5:c(n.filter((function(e){return!e.completed}))),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),v(O.DELETE),H(!1);case 12:return e.prev=12,H(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=Object(p.a)(Object(l.a)().mark((function e(t,n){var r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N(t,n);case 3:r=e.sent,c((function(e){var n=e.findIndex((function(e){return e.id===t}));if(-1===n)return e;var c=Object(d.a)(e);return c[n]=r,c})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),v(O.UPDATE);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),te=function(){var e=Object(p.a)(Object(l.a)().mark((function e(){var t,r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,H(!0),t=n.filter((function(e){return e.completed===z})).map((function(e){return e.id})),e.next=5,Promise.all(t.map((function(e){return N(e,{completed:!z})})));case 5:r=e.sent,c(k(n,r)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),v(O.UPDATE),H(!1);case 13:return e.prev=13,H(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,9,13,16]])})));return function(){return e.apply(this,arguments)}}();return Object(s.jsxs)("div",{className:"todoapp",children:[Object(s.jsx)("h1",{className:"todoapp__title",children:"todos"}),Object(s.jsxs)("div",{className:"todoapp__content",children:[Object(s.jsx)(m,{todos:W,hasSomeTodos:!!n.length,onChangeIsError:Q,onSubmitAddTodo:X,titleTodo:S,onChangeTitle:U,onToggleAll:te}),Y?Object(s.jsx)(A,{}):Object(s.jsx)(L,{tempTodo:V,todos:W,onChangeIsError:Q,onDelete:Z,onChangeTodo:ee}),!!n.length&&Object(s.jsx)(h,{todos:W,filterType:y,setFilterType:_,handleClearCompleted:$})]}),f&&Object(s.jsxs)("div",{className:j()("notification is-danger is-light has-text-weight-normal",{hidden:!f}),children:[Object(s.jsx)("button",{type:"button",className:"delete",onClick:function(){return v(O.NONE)}}),f]})]})};Object(c.createRoot)(document.getElementById("root")).render(Object(s.jsx)(u,{children:Object(s.jsx)(I,{})}))}},[[25,1,2]]]);
//# sourceMappingURL=main.7e45e801.chunk.js.map